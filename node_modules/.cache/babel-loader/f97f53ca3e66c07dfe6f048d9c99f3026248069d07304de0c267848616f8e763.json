{"ast":null,"code":"import { marked } from \"marked\";\nimport axios from \"axios\";\nexport default {\n  name: \"EditorStep\",\n  props: {\n    initialContent: {\n      type: String,\n      default: \"\"\n    },\n    requirements: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  data() {\n    return {\n      contentText: this.initialContent,\n      isGenerating: false,\n      error: null,\n      apiUrl: process.env.VUE_APP_API_URL || \"http://localhost:3001/api\"\n    };\n  },\n  computed: {\n    renderedContent() {\n      if (!this.contentText) {\n        return '<p class=\"placeholder-text\">Content preview will appear here...</p>';\n      }\n      try {\n        return marked.parse(this.contentText);\n      } catch (error) {\n        console.error(\"Error parsing markdown:\", error);\n        return `<p>Error rendering preview: ${error.message}</p>`;\n      }\n    }\n  },\n  methods: {\n    async generateContent() {\n      this.isGenerating = true;\n      this.error = null;\n      try {\n        const payload = {\n          topic: this.requirements.topic || \"General content\",\n          keywords: this.requirements.keywords || \"\",\n          tone: this.requirements.tone || \"Professional\",\n          contentType: this.requirements.contentType || \"Blog Post\"\n        };\n        const response = await axios.post(`${this.apiUrl}/content/generate`, payload);\n        if (response.data.success && response.data.content) {\n          this.contentText = response.data.content;\n        } else {\n          this.error = response.data.error || \"Failed to generate content\";\n          console.error(\"Error generating content:\", this.error);\n        }\n      } catch (error) {\n        console.error(\"Error generating content:\", error);\n        this.error = error.message || \"Failed to connect to AI service\";\n\n        // Fallback for dev/demo\n        if (error.message.includes(\"Network Error\") || error.message.includes(\"Connection refused\")) {\n          this.useFallbackGeneration();\n        }\n      } finally {\n        this.isGenerating = false;\n      }\n    },\n    async improveContent() {\n      if (!this.contentText.trim()) {\n        this.error = \"Please add some content to improve\";\n        return;\n      }\n      this.isGenerating = true;\n      this.error = null;\n      try {\n        const payload = {\n          content: this.contentText,\n          tone: this.requirements.tone || \"Professional\",\n          instructions: \"Improve the clarity and flow of the content\"\n        };\n        const response = await axios.post(`${this.apiUrl}/content/improve`, payload);\n        if (response.data.success && response.data.content) {\n          this.contentText = response.data.content;\n        } else {\n          this.error = response.data.error || \"Failed to improve content\";\n          console.error(\"Error improving content:\", this.error);\n        }\n      } catch (error) {\n        console.error(\"Error improving content:\", error);\n        this.error = error.message || \"Failed to connect to AI service\";\n\n        // Fallback for dev/demo\n        if (error.message.includes(\"Network Error\") || error.message.includes(\"Connection refused\")) {\n          this.useFallbackImprovement();\n        }\n      } finally {\n        this.isGenerating = false;\n      }\n    },\n    saveContent() {\n      this.$emit(\"content-save\", this.contentText);\n    },\n    insertMarkdown(prefix, suffix) {\n      const textarea = document.querySelector(\".content-textarea\");\n      const start = textarea.selectionStart;\n      const end = textarea.selectionEnd;\n      const selectedText = this.contentText.substring(start, end);\n      const beforeText = this.contentText.substring(0, start);\n      const afterText = this.contentText.substring(end);\n      this.contentText = beforeText + prefix + selectedText + suffix + afterText;\n\n      // Set cursor position\n      this.$nextTick(() => {\n        textarea.focus();\n        textarea.selectionStart = start + prefix.length;\n        textarea.selectionEnd = start + prefix.length + selectedText.length;\n      });\n    },\n    insertList() {\n      const textarea = document.querySelector(\".content-textarea\");\n      const start = textarea.selectionStart;\n      const end = textarea.selectionEnd;\n      const selectedText = this.contentText.substring(start, end);\n      let listText;\n      if (selectedText) {\n        // Convert selected text to list items\n        listText = selectedText.split(\"\\n\").map(line => line.trim() ? `- ${line}` : line).join(\"\\n\");\n      } else {\n        listText = \"- List item\\n- Another item\\n- One more item\";\n      }\n      const beforeText = this.contentText.substring(0, start);\n      const afterText = this.contentText.substring(end);\n      this.contentText = beforeText + listText + afterText;\n      this.$nextTick(() => {\n        textarea.focus();\n        textarea.selectionStart = start;\n        textarea.selectionEnd = start + listText.length;\n      });\n    },\n    handleTab(e) {\n      const textarea = e.target;\n      const start = textarea.selectionStart;\n      const end = textarea.selectionEnd;\n\n      // Insert tab character\n      this.contentText = this.contentText.substring(0, start) + \"  \" + this.contentText.substring(end);\n\n      // Update cursor position\n      this.$nextTick(() => {\n        textarea.selectionStart = textarea.selectionEnd = start + 2;\n      });\n    },\n    // Fallback methods for dev/demo when API is not available\n    useFallbackGeneration() {\n      const topic = this.requirements.topic || \"Digital Marketing\";\n      const contentType = this.requirements.contentType || \"Blog Post\";\n      const tone = this.requirements.tone || \"Professional\";\n      const fallbackContent = `# ${topic}\n\n## Introduction\n\n${topic} is a rapidly evolving field that offers numerous opportunities for businesses seeking to expand their digital presence. This ${contentType.toLowerCase()} explores the key aspects of ${topic.toLowerCase()} and provides valuable insights for implementation.\n\n## Key Points\n\n- Understanding the fundamentals of ${topic.toLowerCase()} is essential for success\n- Strategic planning leads to better results in your digital initiatives\n- Regular monitoring and optimization are crucial for long-term success\n- Staying updated with industry trends gives you a competitive advantage\n\n## Best Practices\n\n1. Develop a comprehensive strategy aligned with your business goals\n2. Focus on your target audience's needs and preferences\n3. Utilize data analytics to measure performance and make informed decisions\n4. Adapt your approach based on market changes and emerging trends\n\n## Conclusion\n\nImplementing effective ${topic.toLowerCase()} strategies requires careful planning, continuous learning, and adaptation. By following the best practices outlined in this ${contentType.toLowerCase()}, you can enhance your digital presence and achieve meaningful results.\n\n*This ${contentType.toLowerCase()} was written in a ${tone.toLowerCase()} tone.*`;\n\n      // Set the content with a delay to simulate API processing\n      setTimeout(() => {\n        this.contentText = fallbackContent;\n      }, 1500);\n    },\n    useFallbackImprovement() {\n      // Just simulate some improvements to the existing content\n      const originalContent = this.contentText;\n      setTimeout(() => {\n        const improvedContent = originalContent.replace(/\\b(good|nice|great)\\b/gi, match => match.toLowerCase() === \"good\" ? \"excellent\" : match.toLowerCase() === \"nice\" ? \"outstanding\" : \"exceptional\");\n\n        // Add a simple improvement note at the beginning\n        this.contentText = `${improvedContent}\\n\\n*This content has been enhanced for clarity and impact.*`;\n      }, 1500);\n    }\n  }\n};","map":{"version":3,"names":["marked","axios","name","props","initialContent","type","String","default","requirements","Object","data","contentText","isGenerating","error","apiUrl","process","env","VUE_APP_API_URL","computed","renderedContent","parse","console","message","methods","generateContent","payload","topic","keywords","tone","contentType","response","post","success","content","includes","useFallbackGeneration","improveContent","trim","instructions","useFallbackImprovement","saveContent","$emit","insertMarkdown","prefix","suffix","textarea","document","querySelector","start","selectionStart","end","selectionEnd","selectedText","substring","beforeText","afterText","$nextTick","focus","length","insertList","listText","split","map","line","join","handleTab","e","target","fallbackContent","toLowerCase","setTimeout","originalContent","improvedContent","replace","match"],"sources":["/Users/nhannguyen/Desktop/Duan/esmart-solutions-agency/src/components/creator-ai/EditorStep.vue"],"sourcesContent":["<template>\n  <div class=\"step-content\">\n    <h2>Content Editor</h2>\n    <div class=\"toolbar\">\n      <div class=\"toolbar-buttons\">\n        <button\n          class=\"toolbar-button\"\n          title=\"Bold\"\n          @click=\"insertMarkdown('**', '**')\"\n        >\n          <strong>B</strong>\n        </button>\n        <button\n          class=\"toolbar-button\"\n          title=\"Italic\"\n          @click=\"insertMarkdown('*', '*')\"\n        >\n          <em>I</em>\n        </button>\n        <button\n          class=\"toolbar-button\"\n          title=\"Heading\"\n          @click=\"insertMarkdown('## ', '')\"\n        >\n          H\n        </button>\n        <button\n          class=\"toolbar-button\"\n          title=\"Link\"\n          @click=\"insertMarkdown('[', '](url)')\"\n        >\n          ðŸ”—\n        </button>\n        <button class=\"toolbar-button\" title=\"List\" @click=\"insertList\">\n          â€¢\n        </button>\n        <button\n          class=\"toolbar-button\"\n          title=\"Quote\"\n          @click=\"insertMarkdown('> ', '')\"\n        >\n          \"\n        </button>\n      </div>\n\n      <div class=\"ai-buttons\">\n        <button\n          class=\"ai-button\"\n          :disabled=\"isGenerating\"\n          @click=\"generateContent\"\n        >\n          <span class=\"ai-icon\">ðŸ¤–</span>\n          {{ isGenerating ? \"Generating...\" : \"Generate with AI\" }}\n        </button>\n        <button\n          class=\"ai-button\"\n          :disabled=\"isGenerating || !contentText.trim()\"\n          @click=\"improveContent\"\n        >\n          <span class=\"ai-icon\">âœ¨</span>\n          {{ isGenerating ? \"Processing...\" : \"Improve Content\" }}\n        </button>\n      </div>\n    </div>\n\n    <div class=\"editor-container\">\n      <div class=\"content-form\">\n        <textarea\n          v-model=\"contentText\"\n          class=\"content-textarea\"\n          placeholder=\"Write or generate your content here...\"\n          @keydown.tab.prevent=\"handleTab\"\n        ></textarea>\n      </div>\n      <div class=\"preview-container\">\n        <div class=\"preview-header\">\n          <h3>Preview</h3>\n        </div>\n        <div class=\"preview-content\" v-html=\"renderedContent\"></div>\n      </div>\n    </div>\n\n    <div v-if=\"error\" class=\"error-message\">\n      {{ error }}\n    </div>\n\n    <div class=\"button-group\">\n      <button class=\"secondary-button\" @click=\"$emit('prev')\">Back</button>\n      <button\n        class=\"primary-button\"\n        :disabled=\"!contentText.trim()\"\n        @click=\"saveContent\"\n      >\n        Next\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { marked } from \"marked\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"EditorStep\",\n  props: {\n    initialContent: {\n      type: String,\n      default: \"\",\n    },\n    requirements: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  data() {\n    return {\n      contentText: this.initialContent,\n      isGenerating: false,\n      error: null,\n      apiUrl: process.env.VUE_APP_API_URL || \"http://localhost:3001/api\",\n    };\n  },\n  computed: {\n    renderedContent() {\n      if (!this.contentText) {\n        return '<p class=\"placeholder-text\">Content preview will appear here...</p>';\n      }\n\n      try {\n        return marked.parse(this.contentText);\n      } catch (error) {\n        console.error(\"Error parsing markdown:\", error);\n        return `<p>Error rendering preview: ${error.message}</p>`;\n      }\n    },\n  },\n  methods: {\n    async generateContent() {\n      this.isGenerating = true;\n      this.error = null;\n\n      try {\n        const payload = {\n          topic: this.requirements.topic || \"General content\",\n          keywords: this.requirements.keywords || \"\",\n          tone: this.requirements.tone || \"Professional\",\n          contentType: this.requirements.contentType || \"Blog Post\",\n        };\n\n        const response = await axios.post(\n          `${this.apiUrl}/content/generate`,\n          payload\n        );\n\n        if (response.data.success && response.data.content) {\n          this.contentText = response.data.content;\n        } else {\n          this.error = response.data.error || \"Failed to generate content\";\n          console.error(\"Error generating content:\", this.error);\n        }\n      } catch (error) {\n        console.error(\"Error generating content:\", error);\n        this.error = error.message || \"Failed to connect to AI service\";\n\n        // Fallback for dev/demo\n        if (\n          error.message.includes(\"Network Error\") ||\n          error.message.includes(\"Connection refused\")\n        ) {\n          this.useFallbackGeneration();\n        }\n      } finally {\n        this.isGenerating = false;\n      }\n    },\n\n    async improveContent() {\n      if (!this.contentText.trim()) {\n        this.error = \"Please add some content to improve\";\n        return;\n      }\n\n      this.isGenerating = true;\n      this.error = null;\n\n      try {\n        const payload = {\n          content: this.contentText,\n          tone: this.requirements.tone || \"Professional\",\n          instructions: \"Improve the clarity and flow of the content\",\n        };\n\n        const response = await axios.post(\n          `${this.apiUrl}/content/improve`,\n          payload\n        );\n\n        if (response.data.success && response.data.content) {\n          this.contentText = response.data.content;\n        } else {\n          this.error = response.data.error || \"Failed to improve content\";\n          console.error(\"Error improving content:\", this.error);\n        }\n      } catch (error) {\n        console.error(\"Error improving content:\", error);\n        this.error = error.message || \"Failed to connect to AI service\";\n\n        // Fallback for dev/demo\n        if (\n          error.message.includes(\"Network Error\") ||\n          error.message.includes(\"Connection refused\")\n        ) {\n          this.useFallbackImprovement();\n        }\n      } finally {\n        this.isGenerating = false;\n      }\n    },\n\n    saveContent() {\n      this.$emit(\"content-save\", this.contentText);\n    },\n\n    insertMarkdown(prefix, suffix) {\n      const textarea = document.querySelector(\".content-textarea\");\n      const start = textarea.selectionStart;\n      const end = textarea.selectionEnd;\n      const selectedText = this.contentText.substring(start, end);\n\n      const beforeText = this.contentText.substring(0, start);\n      const afterText = this.contentText.substring(end);\n\n      this.contentText =\n        beforeText + prefix + selectedText + suffix + afterText;\n\n      // Set cursor position\n      this.$nextTick(() => {\n        textarea.focus();\n        textarea.selectionStart = start + prefix.length;\n        textarea.selectionEnd = start + prefix.length + selectedText.length;\n      });\n    },\n\n    insertList() {\n      const textarea = document.querySelector(\".content-textarea\");\n      const start = textarea.selectionStart;\n      const end = textarea.selectionEnd;\n      const selectedText = this.contentText.substring(start, end);\n\n      let listText;\n      if (selectedText) {\n        // Convert selected text to list items\n        listText = selectedText\n          .split(\"\\n\")\n          .map((line) => (line.trim() ? `- ${line}` : line))\n          .join(\"\\n\");\n      } else {\n        listText = \"- List item\\n- Another item\\n- One more item\";\n      }\n\n      const beforeText = this.contentText.substring(0, start);\n      const afterText = this.contentText.substring(end);\n\n      this.contentText = beforeText + listText + afterText;\n\n      this.$nextTick(() => {\n        textarea.focus();\n        textarea.selectionStart = start;\n        textarea.selectionEnd = start + listText.length;\n      });\n    },\n\n    handleTab(e) {\n      const textarea = e.target;\n      const start = textarea.selectionStart;\n      const end = textarea.selectionEnd;\n\n      // Insert tab character\n      this.contentText =\n        this.contentText.substring(0, start) +\n        \"  \" +\n        this.contentText.substring(end);\n\n      // Update cursor position\n      this.$nextTick(() => {\n        textarea.selectionStart = textarea.selectionEnd = start + 2;\n      });\n    },\n\n    // Fallback methods for dev/demo when API is not available\n    useFallbackGeneration() {\n      const topic = this.requirements.topic || \"Digital Marketing\";\n      const contentType = this.requirements.contentType || \"Blog Post\";\n      const tone = this.requirements.tone || \"Professional\";\n\n      const fallbackContent = `# ${topic}\n\n## Introduction\n\n${topic} is a rapidly evolving field that offers numerous opportunities for businesses seeking to expand their digital presence. This ${contentType.toLowerCase()} explores the key aspects of ${topic.toLowerCase()} and provides valuable insights for implementation.\n\n## Key Points\n\n- Understanding the fundamentals of ${topic.toLowerCase()} is essential for success\n- Strategic planning leads to better results in your digital initiatives\n- Regular monitoring and optimization are crucial for long-term success\n- Staying updated with industry trends gives you a competitive advantage\n\n## Best Practices\n\n1. Develop a comprehensive strategy aligned with your business goals\n2. Focus on your target audience's needs and preferences\n3. Utilize data analytics to measure performance and make informed decisions\n4. Adapt your approach based on market changes and emerging trends\n\n## Conclusion\n\nImplementing effective ${topic.toLowerCase()} strategies requires careful planning, continuous learning, and adaptation. By following the best practices outlined in this ${contentType.toLowerCase()}, you can enhance your digital presence and achieve meaningful results.\n\n*This ${contentType.toLowerCase()} was written in a ${tone.toLowerCase()} tone.*`;\n\n      // Set the content with a delay to simulate API processing\n      setTimeout(() => {\n        this.contentText = fallbackContent;\n      }, 1500);\n    },\n\n    useFallbackImprovement() {\n      // Just simulate some improvements to the existing content\n      const originalContent = this.contentText;\n\n      setTimeout(() => {\n        const improvedContent = originalContent.replace(\n          /\\b(good|nice|great)\\b/gi,\n          (match) =>\n            match.toLowerCase() === \"good\"\n              ? \"excellent\"\n              : match.toLowerCase() === \"nice\"\n              ? \"outstanding\"\n              : \"exceptional\"\n        );\n\n        // Add a simple improvement note at the beginning\n        this.contentText = `${improvedContent}\\n\\n*This content has been enhanced for clarity and impact.*`;\n      }, 1500);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.step-content {\n  background: white;\n  border-radius: 12px;\n  padding: 2rem;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\nh2 {\n  color: #1c1c4c;\n  margin-bottom: 1.5rem;\n  text-align: center;\n}\n\n.toolbar {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n\n.toolbar-buttons {\n  display: flex;\n  gap: 0.5rem;\n}\n\n.toolbar-button {\n  background: #f8f9fa;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.toolbar-button:hover {\n  background: #e9ecef;\n  border-color: #ced4da;\n}\n\n.ai-buttons {\n  display: flex;\n  gap: 0.5rem;\n}\n\n.ai-button {\n  background: #1c1c4c;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  padding: 0 1rem;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.ai-button:hover:not(:disabled) {\n  background: #2a2a6c;\n}\n\n.ai-button:disabled {\n  background: #7a7a9c;\n  cursor: not-allowed;\n}\n\n.ai-icon {\n  font-size: 1.1rem;\n}\n\n.editor-container {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1.5rem;\n  margin-bottom: 1.5rem;\n}\n\n.content-form {\n  display: flex;\n  flex-direction: column;\n}\n\n.content-textarea {\n  min-height: 400px;\n  padding: 1rem;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  resize: vertical;\n  font-family: \"Consolas\", monospace;\n  line-height: 1.6;\n  font-size: 0.95rem;\n}\n\n.content-textarea:focus {\n  outline: none;\n  border-color: #1c1c4c;\n  box-shadow: 0 0 0 2px rgba(28, 28, 76, 0.2);\n}\n\n.preview-container {\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.preview-header {\n  background: #f8f9fa;\n  padding: 0.5rem 1rem;\n  border-bottom: 1px solid #ddd;\n}\n\n.preview-header h3 {\n  margin: 0;\n  color: #1c1c4c;\n  font-size: 1rem;\n}\n\n.preview-content {\n  padding: 1rem;\n  min-height: 400px;\n  max-height: 400px;\n  overflow-y: auto;\n  line-height: 1.6;\n}\n\n.button-group {\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  margin-top: 1.5rem;\n}\n\n.primary-button {\n  background: #1c1c4c;\n  color: white;\n  border: none;\n  padding: 0.75rem 1.5rem;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: background-color 0.3s ease;\n}\n\n.primary-button:hover:not(:disabled) {\n  background: #2a2a6c;\n}\n\n.primary-button:disabled {\n  background: #7a7a9c;\n  cursor: not-allowed;\n}\n\n.secondary-button {\n  background: white;\n  color: #1c1c4c;\n  border: 1px solid #1c1c4c;\n  padding: 0.75rem 1.5rem;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n}\n\n.secondary-button:hover {\n  background: #f8f9fa;\n}\n\n.placeholder-text {\n  color: #6c757d;\n  font-style: italic;\n}\n\n.error-message {\n  margin-top: 1rem;\n  padding: 0.75rem;\n  background-color: #fff0f0;\n  border-left: 4px solid #ff5252;\n  color: #d32f2f;\n  border-radius: 4px;\n}\n\n@media (max-width: 768px) {\n  .editor-container {\n    grid-template-columns: 1fr;\n  }\n\n  .content-textarea {\n    min-height: 250px;\n  }\n\n  .preview-content {\n    min-height: 250px;\n    max-height: 250px;\n  }\n\n  .button-group {\n    flex-direction: column;\n  }\n\n  .primary-button,\n  .secondary-button {\n    width: 100%;\n  }\n}\n</style>\n"],"mappings":"AAoGA,SAASA,MAAK,QAAS,QAAQ;AAC/B,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,KAAK,EAAE;IACLC,cAAc,EAAE;MACdC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDC,YAAY,EAAE;MACZH,IAAI,EAAEI,MAAM;MACZF,OAAO,EAAEA,CAAA,MAAO,CAAC,CAAC;IACpB;EACF,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,IAAI,CAACP,cAAc;MAChCQ,YAAY,EAAE,KAAK;MACnBC,KAAK,EAAE,IAAI;MACXC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,eAAc,IAAK;IACzC,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,eAAeA,CAAA,EAAG;MAChB,IAAI,CAAC,IAAI,CAACR,WAAW,EAAE;QACrB,OAAO,qEAAqE;MAC9E;MAEA,IAAI;QACF,OAAOX,MAAM,CAACoB,KAAK,CAAC,IAAI,CAACT,WAAW,CAAC;MACvC,EAAE,OAAOE,KAAK,EAAE;QACdQ,OAAO,CAACR,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C,OAAO,+BAA+BA,KAAK,CAACS,OAAO,MAAM;MAC3D;IACF;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,eAAeA,CAAA,EAAG;MACtB,IAAI,CAACZ,YAAW,GAAI,IAAI;MACxB,IAAI,CAACC,KAAI,GAAI,IAAI;MAEjB,IAAI;QACF,MAAMY,OAAM,GAAI;UACdC,KAAK,EAAE,IAAI,CAAClB,YAAY,CAACkB,KAAI,IAAK,iBAAiB;UACnDC,QAAQ,EAAE,IAAI,CAACnB,YAAY,CAACmB,QAAO,IAAK,EAAE;UAC1CC,IAAI,EAAE,IAAI,CAACpB,YAAY,CAACoB,IAAG,IAAK,cAAc;UAC9CC,WAAW,EAAE,IAAI,CAACrB,YAAY,CAACqB,WAAU,IAAK;QAChD,CAAC;QAED,MAAMC,QAAO,GAAI,MAAM7B,KAAK,CAAC8B,IAAI,CAC/B,GAAG,IAAI,CAACjB,MAAM,mBAAmB,EACjCW,OACF,CAAC;QAED,IAAIK,QAAQ,CAACpB,IAAI,CAACsB,OAAM,IAAKF,QAAQ,CAACpB,IAAI,CAACuB,OAAO,EAAE;UAClD,IAAI,CAACtB,WAAU,GAAImB,QAAQ,CAACpB,IAAI,CAACuB,OAAO;QAC1C,OAAO;UACL,IAAI,CAACpB,KAAI,GAAIiB,QAAQ,CAACpB,IAAI,CAACG,KAAI,IAAK,4BAA4B;UAChEQ,OAAO,CAACR,KAAK,CAAC,2BAA2B,EAAE,IAAI,CAACA,KAAK,CAAC;QACxD;MACF,EAAE,OAAOA,KAAK,EAAE;QACdQ,OAAO,CAACR,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;QACjD,IAAI,CAACA,KAAI,GAAIA,KAAK,CAACS,OAAM,IAAK,iCAAiC;;QAE/D;QACA,IACET,KAAK,CAACS,OAAO,CAACY,QAAQ,CAAC,eAAe,KACtCrB,KAAK,CAACS,OAAO,CAACY,QAAQ,CAAC,oBAAoB,GAC3C;UACA,IAAI,CAACC,qBAAqB,CAAC,CAAC;QAC9B;MACF,UAAU;QACR,IAAI,CAACvB,YAAW,GAAI,KAAK;MAC3B;IACF,CAAC;IAED,MAAMwB,cAAcA,CAAA,EAAG;MACrB,IAAI,CAAC,IAAI,CAACzB,WAAW,CAAC0B,IAAI,CAAC,CAAC,EAAE;QAC5B,IAAI,CAACxB,KAAI,GAAI,oCAAoC;QACjD;MACF;MAEA,IAAI,CAACD,YAAW,GAAI,IAAI;MACxB,IAAI,CAACC,KAAI,GAAI,IAAI;MAEjB,IAAI;QACF,MAAMY,OAAM,GAAI;UACdQ,OAAO,EAAE,IAAI,CAACtB,WAAW;UACzBiB,IAAI,EAAE,IAAI,CAACpB,YAAY,CAACoB,IAAG,IAAK,cAAc;UAC9CU,YAAY,EAAE;QAChB,CAAC;QAED,MAAMR,QAAO,GAAI,MAAM7B,KAAK,CAAC8B,IAAI,CAC/B,GAAG,IAAI,CAACjB,MAAM,kBAAkB,EAChCW,OACF,CAAC;QAED,IAAIK,QAAQ,CAACpB,IAAI,CAACsB,OAAM,IAAKF,QAAQ,CAACpB,IAAI,CAACuB,OAAO,EAAE;UAClD,IAAI,CAACtB,WAAU,GAAImB,QAAQ,CAACpB,IAAI,CAACuB,OAAO;QAC1C,OAAO;UACL,IAAI,CAACpB,KAAI,GAAIiB,QAAQ,CAACpB,IAAI,CAACG,KAAI,IAAK,2BAA2B;UAC/DQ,OAAO,CAACR,KAAK,CAAC,0BAA0B,EAAE,IAAI,CAACA,KAAK,CAAC;QACvD;MACF,EAAE,OAAOA,KAAK,EAAE;QACdQ,OAAO,CAACR,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAChD,IAAI,CAACA,KAAI,GAAIA,KAAK,CAACS,OAAM,IAAK,iCAAiC;;QAE/D;QACA,IACET,KAAK,CAACS,OAAO,CAACY,QAAQ,CAAC,eAAe,KACtCrB,KAAK,CAACS,OAAO,CAACY,QAAQ,CAAC,oBAAoB,GAC3C;UACA,IAAI,CAACK,sBAAsB,CAAC,CAAC;QAC/B;MACF,UAAU;QACR,IAAI,CAAC3B,YAAW,GAAI,KAAK;MAC3B;IACF,CAAC;IAED4B,WAAWA,CAAA,EAAG;MACZ,IAAI,CAACC,KAAK,CAAC,cAAc,EAAE,IAAI,CAAC9B,WAAW,CAAC;IAC9C,CAAC;IAED+B,cAAcA,CAACC,MAAM,EAAEC,MAAM,EAAE;MAC7B,MAAMC,QAAO,GAAIC,QAAQ,CAACC,aAAa,CAAC,mBAAmB,CAAC;MAC5D,MAAMC,KAAI,GAAIH,QAAQ,CAACI,cAAc;MACrC,MAAMC,GAAE,GAAIL,QAAQ,CAACM,YAAY;MACjC,MAAMC,YAAW,GAAI,IAAI,CAACzC,WAAW,CAAC0C,SAAS,CAACL,KAAK,EAAEE,GAAG,CAAC;MAE3D,MAAMI,UAAS,GAAI,IAAI,CAAC3C,WAAW,CAAC0C,SAAS,CAAC,CAAC,EAAEL,KAAK,CAAC;MACvD,MAAMO,SAAQ,GAAI,IAAI,CAAC5C,WAAW,CAAC0C,SAAS,CAACH,GAAG,CAAC;MAEjD,IAAI,CAACvC,WAAU,GACb2C,UAAS,GAAIX,MAAK,GAAIS,YAAW,GAAIR,MAAK,GAAIW,SAAS;;MAEzD;MACA,IAAI,CAACC,SAAS,CAAC,MAAM;QACnBX,QAAQ,CAACY,KAAK,CAAC,CAAC;QAChBZ,QAAQ,CAACI,cAAa,GAAID,KAAI,GAAIL,MAAM,CAACe,MAAM;QAC/Cb,QAAQ,CAACM,YAAW,GAAIH,KAAI,GAAIL,MAAM,CAACe,MAAK,GAAIN,YAAY,CAACM,MAAM;MACrE,CAAC,CAAC;IACJ,CAAC;IAEDC,UAAUA,CAAA,EAAG;MACX,MAAMd,QAAO,GAAIC,QAAQ,CAACC,aAAa,CAAC,mBAAmB,CAAC;MAC5D,MAAMC,KAAI,GAAIH,QAAQ,CAACI,cAAc;MACrC,MAAMC,GAAE,GAAIL,QAAQ,CAACM,YAAY;MACjC,MAAMC,YAAW,GAAI,IAAI,CAACzC,WAAW,CAAC0C,SAAS,CAACL,KAAK,EAAEE,GAAG,CAAC;MAE3D,IAAIU,QAAQ;MACZ,IAAIR,YAAY,EAAE;QAChB;QACAQ,QAAO,GAAIR,YAAW,CACnBS,KAAK,CAAC,IAAI,EACVC,GAAG,CAAEC,IAAI,IAAMA,IAAI,CAAC1B,IAAI,CAAC,IAAI,KAAK0B,IAAI,EAAC,GAAIA,IAAK,EAChDC,IAAI,CAAC,IAAI,CAAC;MACf,OAAO;QACLJ,QAAO,GAAI,8CAA8C;MAC3D;MAEA,MAAMN,UAAS,GAAI,IAAI,CAAC3C,WAAW,CAAC0C,SAAS,CAAC,CAAC,EAAEL,KAAK,CAAC;MACvD,MAAMO,SAAQ,GAAI,IAAI,CAAC5C,WAAW,CAAC0C,SAAS,CAACH,GAAG,CAAC;MAEjD,IAAI,CAACvC,WAAU,GAAI2C,UAAS,GAAIM,QAAO,GAAIL,SAAS;MAEpD,IAAI,CAACC,SAAS,CAAC,MAAM;QACnBX,QAAQ,CAACY,KAAK,CAAC,CAAC;QAChBZ,QAAQ,CAACI,cAAa,GAAID,KAAK;QAC/BH,QAAQ,CAACM,YAAW,GAAIH,KAAI,GAAIY,QAAQ,CAACF,MAAM;MACjD,CAAC,CAAC;IACJ,CAAC;IAEDO,SAASA,CAACC,CAAC,EAAE;MACX,MAAMrB,QAAO,GAAIqB,CAAC,CAACC,MAAM;MACzB,MAAMnB,KAAI,GAAIH,QAAQ,CAACI,cAAc;MACrC,MAAMC,GAAE,GAAIL,QAAQ,CAACM,YAAY;;MAEjC;MACA,IAAI,CAACxC,WAAU,GACb,IAAI,CAACA,WAAW,CAAC0C,SAAS,CAAC,CAAC,EAAEL,KAAK,IACnC,IAAG,GACH,IAAI,CAACrC,WAAW,CAAC0C,SAAS,CAACH,GAAG,CAAC;;MAEjC;MACA,IAAI,CAACM,SAAS,CAAC,MAAM;QACnBX,QAAQ,CAACI,cAAa,GAAIJ,QAAQ,CAACM,YAAW,GAAIH,KAAI,GAAI,CAAC;MAC7D,CAAC,CAAC;IACJ,CAAC;IAED;IACAb,qBAAqBA,CAAA,EAAG;MACtB,MAAMT,KAAI,GAAI,IAAI,CAAClB,YAAY,CAACkB,KAAI,IAAK,mBAAmB;MAC5D,MAAMG,WAAU,GAAI,IAAI,CAACrB,YAAY,CAACqB,WAAU,IAAK,WAAW;MAChE,MAAMD,IAAG,GAAI,IAAI,CAACpB,YAAY,CAACoB,IAAG,IAAK,cAAc;MAErD,MAAMwC,eAAc,GAAI,KAAK1C,KAAK;;AAExC;;AAEA,EAAEA,KAAK,iIAAiIG,WAAW,CAACwC,WAAW,CAAC,CAAC,gCAAgC3C,KAAK,CAAC2C,WAAW,CAAC,CAAC;;AAEpN;;AAEA,sCAAsC3C,KAAK,CAAC2C,WAAW,CAAC,CAAC;AACzD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,yBAAyB3C,KAAK,CAAC2C,WAAW,CAAC,CAAC,gIAAgIxC,WAAW,CAACwC,WAAW,CAAC,CAAC;;AAErM,QAAQxC,WAAW,CAACwC,WAAW,CAAC,CAAC,qBAAqBzC,IAAI,CAACyC,WAAW,CAAC,CAAC,SAAS;;MAE3E;MACAC,UAAU,CAAC,MAAM;QACf,IAAI,CAAC3D,WAAU,GAAIyD,eAAe;MACpC,CAAC,EAAE,IAAI,CAAC;IACV,CAAC;IAED7B,sBAAsBA,CAAA,EAAG;MACvB;MACA,MAAMgC,eAAc,GAAI,IAAI,CAAC5D,WAAW;MAExC2D,UAAU,CAAC,MAAM;QACf,MAAME,eAAc,GAAID,eAAe,CAACE,OAAO,CAC7C,yBAAyB,EACxBC,KAAK,IACJA,KAAK,CAACL,WAAW,CAAC,MAAM,MAAK,GACzB,WAAU,GACVK,KAAK,CAACL,WAAW,CAAC,MAAM,MAAK,GAC7B,aAAY,GACZ,aACR,CAAC;;QAED;QACA,IAAI,CAAC1D,WAAU,GAAI,GAAG6D,eAAe,8DAA8D;MACrG,CAAC,EAAE,IAAI,CAAC;IACV;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}