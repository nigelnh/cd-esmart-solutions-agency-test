{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"EditorStep\",\n  props: {\n    initialContent: {\n      type: String,\n      default: \"\"\n    },\n    suggestedKeywords: {\n      type: Array,\n      default: () => []\n    },\n    readabilityScore: {\n      type: Number,\n      default: 0\n    },\n    contentLength: {\n      type: Number,\n      default: 0\n    },\n    contentId: {\n      type: String,\n      default: \"\"\n    }\n  },\n  data() {\n    return {\n      content: this.initialContent || \"\",\n      seoData: null,\n      isAnalyzing: false,\n      isOptimizing: false,\n      lastSavedContent: \"\",\n      optimizationCount: 0,\n      maxOptimizations: 3\n    };\n  },\n  computed: {\n    keywordsList() {\n      return this.suggestedKeywords || [];\n    },\n    wordCount() {\n      if (!this.content) return 0;\n      return this.content.trim().split(/\\s+/).length;\n    }\n  },\n  methods: {\n    updateContent() {\n      if (this.content !== null && this.content !== undefined) {\n        this.$emit(\"update:content\", this.content);\n      }\n    },\n    goBack() {\n      if (this.contentId) {\n        this.$emit(\"go-to-dashboard\");\n      } else {\n        this.$emit(\"prev\");\n      }\n    },\n    async saveContent() {\n      try {\n        if (!this.contentId) {\n          console.error(\"Cannot save: No content ID provided\");\n          return;\n        }\n\n        // Nếu nội dung không thay đổi, không cần lưu và phân tích lại\n        if (this.content === this.lastSavedContent) {\n          this.showNotification(\"info\", \"Save Content\", \"No changes to save\");\n          return;\n        }\n        this.showNotification(\"info\", \"Save Content\", \"Saving your content...\");\n        const response = await axios.put(`/api/content/contents/${this.contentId}`, {\n          generatedContent: this.content\n        });\n        if (response.data.success) {\n          this.lastSavedContent = this.content;\n          this.showNotification(\"success\", \"Save Content\", \"Content saved successfully!\");\n\n          // Tự động phân tích và tối ưu hóa SEO sau khi lưu\n          await this.autoAnalyzeAndOptimize();\n        } else {\n          this.showNotification(\"error\", \"Save Content\", \"Failed to save content: \" + response.data.error);\n        }\n      } catch (error) {\n        console.error(\"Error saving content:\", error);\n        this.showNotification(\"error\", \"Save Content\", \"Error saving content: \" + error.message);\n      }\n    },\n    async autoAnalyzeAndOptimize() {\n      // Nếu đã đạt giới hạn số lần tối ưu, hiển thị thông báo và không tiếp tục\n      if (this.optimizationCount >= this.maxOptimizations) {\n        this.showNotification(\"info\", \"SEO Optimization\", `Reached maximum optimizations limit (${this.maxOptimizations}). Manual optimization still available if needed.`);\n        return;\n      }\n      await this.analyzeSEO();\n\n      // Nếu điểm SEO dưới 80 và chưa đạt giới hạn số lần tối ưu, tự động tối ưu hóa\n      if (this.seoData && (this.seoData.seoScore || this.seoData.score) < 80) {\n        await this.autoOptimizeSEO();\n      }\n    },\n    async analyzeSEO() {\n      if (!this.contentId) {\n        return;\n      }\n      try {\n        this.isAnalyzing = true;\n\n        // Gọi API phân tích SEO\n        const response = await axios.post(`/api/seo/analyze/${this.contentId}`);\n        if (response.data.success) {\n          this.seoData = response.data.data.analysis;\n          console.log(\"SEO Analysis completed:\", this.seoData);\n        } else {\n          console.error(\"Failed to analyze SEO:\", response.data.error);\n        }\n      } catch (error) {\n        console.error(\"Error analyzing SEO:\", error);\n      } finally {\n        this.isAnalyzing = false;\n      }\n    },\n    async optimizeSEO() {\n      if (!this.contentId) {\n        return;\n      }\n\n      // Kiểm tra giới hạn số lần tối ưu hóa\n      if (this.optimizationCount >= this.maxOptimizations) {\n        this.showNotification(\"info\", \"SEO Optimization\", `Reached maximum optimizations limit (${this.maxOptimizations}).`);\n        return;\n      }\n      try {\n        this.isOptimizing = true;\n        this.showNotification(\"info\", \"SEO Optimization\", \"Optimizing your content...\");\n\n        // Gọi API tối ưu hóa SEO\n        const response = await axios.post(`/api/seo/optimize/${this.contentId}`);\n        if (response.data.success) {\n          const result = response.data.data;\n          if (result.optimized) {\n            // Cập nhật nội dung và điểm số\n            this.content = result.content.generatedContent;\n            this.lastSavedContent = this.content; // Cập nhật nội dung đã lưu\n            this.seoData = await this.fetchSEOData();\n            this.updateContent();\n\n            // Tăng số lần đã tối ưu hóa\n            this.optimizationCount++;\n\n            // Hiển thị thông báo thành công\n            this.showNotification(\"success\", \"SEO Optimization\", `Content optimized! SEO Score: ${result.previousScore} → ${result.newScore} (${this.optimizationCount}/${this.maxOptimizations})`);\n          } else {\n            // Hiển thị thông báo nếu không thể tối ưu thêm\n            this.showNotification(\"info\", \"SEO Optimization\", result.message);\n          }\n        } else {\n          console.error(\"Failed to optimize SEO:\", response.data.error);\n        }\n      } catch (error) {\n        console.error(\"Error optimizing SEO:\", error);\n      } finally {\n        this.isOptimizing = false;\n      }\n    },\n    async autoOptimizeSEO() {\n      if (!this.contentId) {\n        return;\n      }\n\n      // Kiểm tra giới hạn số lần tối ưu hóa\n      if (this.optimizationCount >= this.maxOptimizations) {\n        this.showNotification(\"info\", \"SEO Optimization\", `Reached maximum optimizations limit (${this.maxOptimizations}).`);\n        return;\n      }\n      try {\n        this.isOptimizing = true;\n\n        // Gọi API tự động tối ưu hóa với giới hạn số lần còn lại\n        const remainingOptimizations = this.maxOptimizations - this.optimizationCount;\n        const response = await axios.post(`/api/seo/auto-optimize/${this.contentId}`, {\n          maxOptimizations: remainingOptimizations,\n          targetScore: 80\n        });\n        if (response.data.success) {\n          const result = response.data.data;\n\n          // Cập nhật nội dung và điểm số\n          this.content = result.finalReport.content;\n          this.lastSavedContent = this.content; // Cập nhật nội dung đã lưu\n          this.updateContent();\n          this.seoData = {\n            seoScore: result.finalScore,\n            keywordDensity: result.finalReport.keywordDensity,\n            readabilityScore: result.finalReport.readabilityScore,\n            suggestedKeywords: result.finalReport.suggestedKeywords,\n            detailedAnalysis: result.finalReport.detailedAnalysis\n          };\n\n          // Cập nhật số lần tối ưu hóa\n          this.optimizationCount += result.optimizationCount || 1;\n\n          // Hiển thị thông báo thành công\n          this.showNotification(\"success\", \"SEO Optimization\", `Automatic optimization completed! SEO Score: ${result.initialScore} → ${result.finalScore} (${this.optimizationCount}/${this.maxOptimizations})`);\n        } else {\n          console.error(\"Failed to auto optimize SEO:\", response.data.error);\n        }\n      } catch (error) {\n        console.error(\"Error auto optimizing SEO:\", error);\n      } finally {\n        this.isOptimizing = false;\n      }\n    },\n    async fetchSEOData() {\n      try {\n        const response = await axios.get(`/api/seo/report/${this.contentId}`);\n        if (response.data.success) {\n          return {\n            seoScore: response.data.data.seoScore,\n            keywordDensity: response.data.data.keywordDensity,\n            readabilityScore: response.data.data.readabilityScore,\n            suggestedKeywords: response.data.data.suggestedKeywords,\n            detailedAnalysis: response.data.data.detailedAnalysis\n          };\n        }\n        return null;\n      } catch (error) {\n        console.error(\"Error fetching SEO data:\", error);\n        return null;\n      }\n    },\n    getSEOScoreClass() {\n      if (!this.seoData) return \"poor\";\n      const score = this.seoData.seoScore || this.seoData.score || 0;\n      if (score >= 80) return \"excellent\";\n      if (score >= 60) return \"good\";\n      if (score >= 40) return \"average\";\n      return \"poor\";\n    },\n    formatCategoryName(key) {\n      return key.replace(/([A-Z])/g, \" $1\").replace(/^./, str => str.toUpperCase());\n    },\n    showNotification(type, title, text) {\n      try {\n        if (this.$notify) {\n          this.$notify({\n            type: type,\n            title: title,\n            text: text\n          });\n        } else {\n          console.log(`${title}: ${text}`);\n          if (type === \"success\" || type === \"info\") {\n            alert(`${title}: ${text}`);\n          }\n        }\n      } catch (error) {\n        console.log(`${title}: ${text}`);\n        alert(`${title}: ${text}`);\n      }\n    }\n  },\n  watch: {\n    initialContent(newValue) {\n      this.content = newValue || \"\";\n      if (newValue && newValue !== this.lastSavedContent) {\n        this.lastSavedContent = newValue;\n      }\n    },\n    contentId: {\n      immediate: true,\n      async handler(newValue) {\n        if (newValue) {\n          // Nếu có contentId, kiểm tra xem đã có dữ liệu SEO chưa\n          const seoData = await this.fetchSEOData();\n          if (seoData) {\n            this.seoData = seoData;\n          } else {\n            // Nếu chưa có dữ liệu SEO, tự động phân tích\n            await this.analyzeSEO();\n          }\n        }\n      }\n    }\n  },\n  mounted() {\n    this.content = this.initialContent || \"\";\n    this.lastSavedContent = this.initialContent || \"\";\n    if (this.content) {\n      this.updateContent();\n    }\n\n    // Nếu có contentId nhưng chưa có seoData, phân tích ngay khi component được tạo\n    if (this.contentId && !this.seoData) {\n      this.$nextTick(async () => {\n        await this.autoAnalyzeAndOptimize();\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","name","props","initialContent","type","String","default","suggestedKeywords","Array","readabilityScore","Number","contentLength","contentId","data","content","seoData","isAnalyzing","isOptimizing","lastSavedContent","optimizationCount","maxOptimizations","computed","keywordsList","wordCount","trim","split","length","methods","updateContent","undefined","$emit","goBack","saveContent","console","error","showNotification","response","put","generatedContent","success","autoAnalyzeAndOptimize","message","analyzeSEO","seoScore","score","autoOptimizeSEO","post","analysis","log","optimizeSEO","result","optimized","fetchSEOData","previousScore","newScore","remainingOptimizations","targetScore","finalReport","finalScore","keywordDensity","detailedAnalysis","initialScore","get","getSEOScoreClass","formatCategoryName","key","replace","str","toUpperCase","title","text","$notify","alert","watch","newValue","immediate","handler","mounted","$nextTick"],"sources":["/Users/nhannguyen/Desktop/Duan/esmart-solutions-agency/src/components/creator-ai/EditorStep.vue"],"sourcesContent":["<template>\n  <div class=\"step-content\">\n    <h2>Content Editor</h2>\n    <div class=\"editor-container\">\n      <div class=\"main-content\">\n        <textarea\n          v-model=\"content\"\n          placeholder=\"Your AI-generated content will appear here...\"\n          @input=\"updateContent\"\n        ></textarea>\n\n        <div class=\"editor-actions\">\n          <button\n            class=\"action-button seo-optimize\"\n            @click=\"optimizeSEO\"\n            v-if=\"\n              contentId && seoData && seoData.seoScore < 80 && !isOptimizing\n            \"\n          >\n            <i class=\"fas fa-magic\"></i> Optimize Content\n          </button>\n          <div v-if=\"isOptimizing\" class=\"optimizing-indicator\">\n            <span class=\"spinner\"></span> Optimizing SEO...\n          </div>\n          <div v-if=\"isAnalyzing\" class=\"analyzing-indicator\">\n            <span class=\"spinner\"></span> Analyzing content...\n          </div>\n        </div>\n      </div>\n      <div class=\"sidebar\">\n        <div class=\"sidebar-section\">\n          <h3>SEO Score</h3>\n          <div class=\"seo-score-container\" v-if=\"seoData\">\n            <div class=\"score-circle\" :class=\"getSEOScoreClass()\">\n              {{ seoData.seoScore || seoData.score || 0 }}/100\n            </div>\n            <div class=\"score-details\">\n              <div v-if=\"seoData.keywordDensity\" class=\"detail-item\">\n                <span class=\"detail-label\">Keyword Density:</span>\n                <span class=\"detail-value\"\n                  >{{ parseFloat(seoData.keywordDensity).toFixed(1) }}%</span\n                >\n              </div>\n              <div v-if=\"seoData.readabilityScore\" class=\"detail-item\">\n                <span class=\"detail-label\">Readability:</span>\n                <span class=\"detail-value\"\n                  >{{ seoData.readabilityScore }}/100</span\n                >\n              </div>\n              <div class=\"detail-item optimization-count\">\n                <span class=\"detail-label\">Optimizations:</span>\n                <span\n                  class=\"detail-value\"\n                  :class=\"{\n                    'limit-reached': optimizationCount >= maxOptimizations,\n                  }\"\n                >\n                  {{ optimizationCount }}/{{ maxOptimizations }}\n                </span>\n              </div>\n            </div>\n          </div>\n          <div v-else class=\"empty-seo-data\">\n            <p v-if=\"isAnalyzing\">Analyzing SEO...</p>\n            <p v-else>\n              SEO analysis will run automatically when content is saved.\n            </p>\n          </div>\n        </div>\n\n        <div class=\"sidebar-section\">\n          <h3>SEO Keywords</h3>\n          <ul>\n            <li v-for=\"(keyword, index) in keywordsList\" :key=\"index\">\n              {{ keyword }}\n            </li>\n          </ul>\n          <div\n            v-if=\"\n              seoData &&\n              seoData.suggestedKeywords &&\n              seoData.suggestedKeywords.length > 0\n            \"\n          >\n            <h4>Suggested Keywords</h4>\n            <ul class=\"suggested-keywords\">\n              <li\n                v-for=\"(keyword, index) in seoData.suggestedKeywords\"\n                :key=\"`sug-${index}`\"\n              >\n                {{ keyword }}\n              </li>\n            </ul>\n          </div>\n        </div>\n\n        <div class=\"sidebar-section\">\n          <h3>Content Length</h3>\n          <div class=\"length\">{{ wordCount }} words</div>\n        </div>\n\n        <div\n          v-if=\"seoData && seoData.detailedAnalysis\"\n          class=\"sidebar-section seo-analysis\"\n        >\n          <h3>SEO Analysis</h3>\n          <div\n            v-for=\"(category, key) in seoData.detailedAnalysis\"\n            :key=\"key\"\n            class=\"analysis-category\"\n          >\n            <h4>{{ formatCategoryName(key) }} ({{ category.score }}/100)</h4>\n            <div class=\"improvement-list\" v-if=\"category.improvements\">\n              <p class=\"improvement-title\">Improvement Suggestions:</p>\n              <ul>\n                <li\n                  v-for=\"(improvement, i) in category.improvements.slice(0, 3)\"\n                  :key=\"i\"\n                >\n                  {{ improvement }}\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"button-group\">\n      <button class=\"secondary-button\" @click=\"goBack\">Back</button>\n      <button class=\"primary-button-save\" @click=\"saveContent\" v-if=\"contentId\">\n        Save Changes\n      </button>\n      <button class=\"primary-button\" @click=\"$emit('next')\">\n        Generate Image\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"EditorStep\",\n  props: {\n    initialContent: {\n      type: String,\n      default: \"\",\n    },\n    suggestedKeywords: {\n      type: Array,\n      default: () => [],\n    },\n    readabilityScore: {\n      type: Number,\n      default: 0,\n    },\n    contentLength: {\n      type: Number,\n      default: 0,\n    },\n    contentId: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data() {\n    return {\n      content: this.initialContent || \"\",\n      seoData: null,\n      isAnalyzing: false,\n      isOptimizing: false,\n      lastSavedContent: \"\",\n      optimizationCount: 0,\n      maxOptimizations: 3,\n    };\n  },\n  computed: {\n    keywordsList() {\n      return this.suggestedKeywords || [];\n    },\n    wordCount() {\n      if (!this.content) return 0;\n      return this.content.trim().split(/\\s+/).length;\n    },\n  },\n  methods: {\n    updateContent() {\n      if (this.content !== null && this.content !== undefined) {\n        this.$emit(\"update:content\", this.content);\n      }\n    },\n    goBack() {\n      if (this.contentId) {\n        this.$emit(\"go-to-dashboard\");\n      } else {\n        this.$emit(\"prev\");\n      }\n    },\n    async saveContent() {\n      try {\n        if (!this.contentId) {\n          console.error(\"Cannot save: No content ID provided\");\n          return;\n        }\n\n        // Nếu nội dung không thay đổi, không cần lưu và phân tích lại\n        if (this.content === this.lastSavedContent) {\n          this.showNotification(\"info\", \"Save Content\", \"No changes to save\");\n          return;\n        }\n\n        this.showNotification(\"info\", \"Save Content\", \"Saving your content...\");\n\n        const response = await axios.put(\n          `/api/content/contents/${this.contentId}`,\n          {\n            generatedContent: this.content,\n          }\n        );\n\n        if (response.data.success) {\n          this.lastSavedContent = this.content;\n          this.showNotification(\n            \"success\",\n            \"Save Content\",\n            \"Content saved successfully!\"\n          );\n\n          // Tự động phân tích và tối ưu hóa SEO sau khi lưu\n          await this.autoAnalyzeAndOptimize();\n        } else {\n          this.showNotification(\n            \"error\",\n            \"Save Content\",\n            \"Failed to save content: \" + response.data.error\n          );\n        }\n      } catch (error) {\n        console.error(\"Error saving content:\", error);\n        this.showNotification(\n          \"error\",\n          \"Save Content\",\n          \"Error saving content: \" + error.message\n        );\n      }\n    },\n\n    async autoAnalyzeAndOptimize() {\n      // Nếu đã đạt giới hạn số lần tối ưu, hiển thị thông báo và không tiếp tục\n      if (this.optimizationCount >= this.maxOptimizations) {\n        this.showNotification(\n          \"info\",\n          \"SEO Optimization\",\n          `Reached maximum optimizations limit (${this.maxOptimizations}). Manual optimization still available if needed.`\n        );\n        return;\n      }\n\n      await this.analyzeSEO();\n\n      // Nếu điểm SEO dưới 80 và chưa đạt giới hạn số lần tối ưu, tự động tối ưu hóa\n      if (this.seoData && (this.seoData.seoScore || this.seoData.score) < 80) {\n        await this.autoOptimizeSEO();\n      }\n    },\n\n    async analyzeSEO() {\n      if (!this.contentId) {\n        return;\n      }\n\n      try {\n        this.isAnalyzing = true;\n\n        // Gọi API phân tích SEO\n        const response = await axios.post(`/api/seo/analyze/${this.contentId}`);\n\n        if (response.data.success) {\n          this.seoData = response.data.data.analysis;\n          console.log(\"SEO Analysis completed:\", this.seoData);\n        } else {\n          console.error(\"Failed to analyze SEO:\", response.data.error);\n        }\n      } catch (error) {\n        console.error(\"Error analyzing SEO:\", error);\n      } finally {\n        this.isAnalyzing = false;\n      }\n    },\n\n    async optimizeSEO() {\n      if (!this.contentId) {\n        return;\n      }\n\n      // Kiểm tra giới hạn số lần tối ưu hóa\n      if (this.optimizationCount >= this.maxOptimizations) {\n        this.showNotification(\n          \"info\",\n          \"SEO Optimization\",\n          `Reached maximum optimizations limit (${this.maxOptimizations}).`\n        );\n        return;\n      }\n\n      try {\n        this.isOptimizing = true;\n        this.showNotification(\n          \"info\",\n          \"SEO Optimization\",\n          \"Optimizing your content...\"\n        );\n\n        // Gọi API tối ưu hóa SEO\n        const response = await axios.post(\n          `/api/seo/optimize/${this.contentId}`\n        );\n\n        if (response.data.success) {\n          const result = response.data.data;\n\n          if (result.optimized) {\n            // Cập nhật nội dung và điểm số\n            this.content = result.content.generatedContent;\n            this.lastSavedContent = this.content; // Cập nhật nội dung đã lưu\n            this.seoData = await this.fetchSEOData();\n            this.updateContent();\n\n            // Tăng số lần đã tối ưu hóa\n            this.optimizationCount++;\n\n            // Hiển thị thông báo thành công\n            this.showNotification(\n              \"success\",\n              \"SEO Optimization\",\n              `Content optimized! SEO Score: ${result.previousScore} → ${result.newScore} (${this.optimizationCount}/${this.maxOptimizations})`\n            );\n          } else {\n            // Hiển thị thông báo nếu không thể tối ưu thêm\n            this.showNotification(\"info\", \"SEO Optimization\", result.message);\n          }\n        } else {\n          console.error(\"Failed to optimize SEO:\", response.data.error);\n        }\n      } catch (error) {\n        console.error(\"Error optimizing SEO:\", error);\n      } finally {\n        this.isOptimizing = false;\n      }\n    },\n\n    async autoOptimizeSEO() {\n      if (!this.contentId) {\n        return;\n      }\n\n      // Kiểm tra giới hạn số lần tối ưu hóa\n      if (this.optimizationCount >= this.maxOptimizations) {\n        this.showNotification(\n          \"info\",\n          \"SEO Optimization\",\n          `Reached maximum optimizations limit (${this.maxOptimizations}).`\n        );\n        return;\n      }\n\n      try {\n        this.isOptimizing = true;\n\n        // Gọi API tự động tối ưu hóa với giới hạn số lần còn lại\n        const remainingOptimizations =\n          this.maxOptimizations - this.optimizationCount;\n        const response = await axios.post(\n          `/api/seo/auto-optimize/${this.contentId}`,\n          {\n            maxOptimizations: remainingOptimizations,\n            targetScore: 80,\n          }\n        );\n\n        if (response.data.success) {\n          const result = response.data.data;\n\n          // Cập nhật nội dung và điểm số\n          this.content = result.finalReport.content;\n          this.lastSavedContent = this.content; // Cập nhật nội dung đã lưu\n          this.updateContent();\n\n          this.seoData = {\n            seoScore: result.finalScore,\n            keywordDensity: result.finalReport.keywordDensity,\n            readabilityScore: result.finalReport.readabilityScore,\n            suggestedKeywords: result.finalReport.suggestedKeywords,\n            detailedAnalysis: result.finalReport.detailedAnalysis,\n          };\n\n          // Cập nhật số lần tối ưu hóa\n          this.optimizationCount += result.optimizationCount || 1;\n\n          // Hiển thị thông báo thành công\n          this.showNotification(\n            \"success\",\n            \"SEO Optimization\",\n            `Automatic optimization completed! SEO Score: ${result.initialScore} → ${result.finalScore} (${this.optimizationCount}/${this.maxOptimizations})`\n          );\n        } else {\n          console.error(\"Failed to auto optimize SEO:\", response.data.error);\n        }\n      } catch (error) {\n        console.error(\"Error auto optimizing SEO:\", error);\n      } finally {\n        this.isOptimizing = false;\n      }\n    },\n\n    async fetchSEOData() {\n      try {\n        const response = await axios.get(`/api/seo/report/${this.contentId}`);\n\n        if (response.data.success) {\n          return {\n            seoScore: response.data.data.seoScore,\n            keywordDensity: response.data.data.keywordDensity,\n            readabilityScore: response.data.data.readabilityScore,\n            suggestedKeywords: response.data.data.suggestedKeywords,\n            detailedAnalysis: response.data.data.detailedAnalysis,\n          };\n        }\n        return null;\n      } catch (error) {\n        console.error(\"Error fetching SEO data:\", error);\n        return null;\n      }\n    },\n\n    getSEOScoreClass() {\n      if (!this.seoData) return \"poor\";\n\n      const score = this.seoData.seoScore || this.seoData.score || 0;\n      if (score >= 80) return \"excellent\";\n      if (score >= 60) return \"good\";\n      if (score >= 40) return \"average\";\n      return \"poor\";\n    },\n\n    formatCategoryName(key) {\n      return key\n        .replace(/([A-Z])/g, \" $1\")\n        .replace(/^./, (str) => str.toUpperCase());\n    },\n\n    showNotification(type, title, text) {\n      try {\n        if (this.$notify) {\n          this.$notify({\n            type: type,\n            title: title,\n            text: text,\n          });\n        } else {\n          console.log(`${title}: ${text}`);\n          if (type === \"success\" || type === \"info\") {\n            alert(`${title}: ${text}`);\n          }\n        }\n      } catch (error) {\n        console.log(`${title}: ${text}`);\n        alert(`${title}: ${text}`);\n      }\n    },\n  },\n  watch: {\n    initialContent(newValue) {\n      this.content = newValue || \"\";\n      if (newValue && newValue !== this.lastSavedContent) {\n        this.lastSavedContent = newValue;\n      }\n    },\n    contentId: {\n      immediate: true,\n      async handler(newValue) {\n        if (newValue) {\n          // Nếu có contentId, kiểm tra xem đã có dữ liệu SEO chưa\n          const seoData = await this.fetchSEOData();\n          if (seoData) {\n            this.seoData = seoData;\n          } else {\n            // Nếu chưa có dữ liệu SEO, tự động phân tích\n            await this.analyzeSEO();\n          }\n        }\n      },\n    },\n  },\n  mounted() {\n    this.content = this.initialContent || \"\";\n    this.lastSavedContent = this.initialContent || \"\";\n\n    if (this.content) {\n      this.updateContent();\n    }\n\n    // Nếu có contentId nhưng chưa có seoData, phân tích ngay khi component được tạo\n    if (this.contentId && !this.seoData) {\n      this.$nextTick(async () => {\n        await this.autoAnalyzeAndOptimize();\n      });\n    }\n  },\n};\n</script>\n\n<style scoped>\n.step-content {\n  background: white;\n  border-radius: 12px;\n  padding: 2rem;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\nh2 {\n  color: #1c1c4c;\n  margin-bottom: 2rem;\n  text-align: center;\n}\n\n.editor-container {\n  display: grid;\n  grid-template-columns: 2fr 1fr;\n  gap: 2rem;\n}\n\n.main-content textarea {\n  width: 100%;\n  height: 400px;\n  padding: 1rem;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  resize: vertical;\n  font-family: \"Arial\", sans-serif;\n  line-height: 1.6;\n}\n\n.editor-actions {\n  display: flex;\n  justify-content: flex-start;\n  gap: 10px;\n  margin-top: 10px;\n}\n\n.action-button {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  transition: background-color 0.3s;\n}\n\n.seo-optimize {\n  background-color: #e3f2fd;\n  color: #0d47a1;\n}\n\n.seo-optimize:hover {\n  background-color: #bbdefb;\n}\n\n.optimizing-indicator {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #2e7d32;\n  font-size: 0.9rem;\n}\n\n.spinner {\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  border: 2px solid rgba(46, 125, 50, 0.3);\n  border-radius: 50%;\n  border-top-color: #2e7d32;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.analyzing-indicator {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #2e7d32;\n  font-size: 0.9rem;\n}\n\n.sidebar {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n  max-height: 600px;\n  overflow-y: auto;\n}\n\n.sidebar-section {\n  margin-bottom: 1.5rem;\n}\n\n.sidebar-section h3 {\n  color: #1c1c4c;\n  margin-bottom: 0.5rem;\n  border-bottom: 1px solid #eaeaea;\n  padding-bottom: 8px;\n}\n\n.sidebar-section h4 {\n  color: #1c1c4c;\n  font-size: 0.9rem;\n  margin-top: 0.8rem;\n  margin-bottom: 0.3rem;\n}\n\n.sidebar-section ul {\n  list-style-type: none;\n  padding-left: 0;\n}\n\n.sidebar-section li {\n  padding: 0.3rem 0.5rem;\n  background: #e9ecef;\n  margin-bottom: 0.5rem;\n  border-radius: 4px;\n  font-size: 0.9rem;\n}\n\n.suggested-keywords li {\n  background: #e3f2fd;\n  color: #0d47a1;\n}\n\n.seo-score-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n}\n\n.score-circle {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: white;\n  margin-bottom: 10px;\n}\n\n.score-circle.excellent {\n  background-color: #4caf50;\n}\n\n.score-circle.good {\n  background-color: #8bc34a;\n}\n\n.score-circle.average {\n  background-color: #ffc107;\n}\n\n.score-circle.poor {\n  background-color: #f44336;\n}\n\n.score-details {\n  width: 100%;\n}\n\n.detail-item {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 5px;\n  font-size: 0.9rem;\n}\n\n.empty-seo-data {\n  text-align: center;\n  color: #6c757d;\n  font-size: 0.9rem;\n  padding: 10px;\n  background: #f0f0f0;\n  border-radius: 4px;\n}\n\n.analysis-category {\n  background: #f0f4f8;\n  border-radius: 4px;\n  padding: 10px;\n  margin-bottom: 10px;\n}\n\n.improvement-title {\n  font-size: 0.85rem;\n  font-weight: bold;\n  margin: 5px 0;\n}\n\n.improvement-list ul {\n  margin-top: 5px;\n}\n\n.improvement-list li {\n  background: #e6f7ff;\n  color: #0d47a1;\n  font-size: 0.85rem;\n}\n\n.score,\n.length {\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: #1c1c4c;\n  text-align: center;\n  padding: 0.5rem;\n  background: #e9ecef;\n  border-radius: 4px;\n}\n\n.button-group {\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  margin-top: 2rem;\n}\n\n.primary-button {\n  background: #1c1c4c;\n  color: white;\n  border: none;\n  padding: 0.75rem 1.5rem;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: background-color 0.3s ease;\n}\n\n.primary-button:hover {\n  background: #2a2a6c;\n}\n\n.primary-button-save {\n  background: #28a745;\n  color: white;\n  border: none;\n  padding: 0.75rem 1.5rem;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: background-color 0.3s ease;\n}\n\n.primary-button-save:hover {\n  background: #218838;\n}\n\n.secondary-button {\n  background: white;\n  color: #1c1c4c;\n  border: 1px solid #1c1c4c;\n  padding: 0.75rem 1.5rem;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n}\n\n.secondary-button:hover {\n  background: #f8f9fa;\n}\n\n@media (max-width: 768px) {\n  .editor-container {\n    grid-template-columns: 1fr;\n  }\n\n  .button-group {\n    flex-direction: column;\n  }\n\n  .primary-button,\n  .secondary-button {\n    width: 100%;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}